<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US"
      lang="en-US"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="plone">
<head>
    <metal:js metal:fill-slot="javascript_head_slot">
        <script type="text/javascript" tal:content="view/init_colorbox">
        </script>
    </metal:js>
</head>
<body>

<metal:content-core fill-slot="content-core">
<metal:main_macro define-macro="content-core"
     tal:define="result python:here.atctListAlbum(images=1, folders=1, subimages=0, others=1);
                 images result/images;
                 albums result/folders;
                 otherContents result/others;
                 Batch python:modules['Products.CMFPlone'].Batch;
                 b_start python:request.get('b_start', 0);
                 kssClassesView context/@@kss_field_decorator_view;
                 getKssClasses nocall:kssClassesView/getKssClassesInlineEditable;
                 templateId template/getId;
                 image_size_suffix view/image_size_suffix;
                 b_size view/settings/batch_size;
                 batch python:Batch(images, b_size, int(b_start), orphan=0)">

    <div metal:define-macro="text-field-view"
         id="parent-fieldname-text" class="stx"
         tal:define="kss_class python:getKssClasses('text',
                     templateId=templateId, macro='text-field-view');
                     has_text exists:context/aq_explicit/getText;
                     text python:has_text and here.getText() or ''"
         tal:condition="text"
         tal:attributes="class python:test(here.Format() in ('text/structured',
                                               'text/x-rst', ), 'stx' + kss_class, 'plain' + kss_class)">
        <div metal:define-slot="inside" tal:replace="structure text">The body</div>
    </div>

    <tal:albumsimages tal:condition="python:albums or images">
        <tal:before-batch repeat="image python:images[0:int(b_start)]">
            <a class="hiddenStructure colorboxLink"
               tal:attributes="href string:${image/absolute_url}${image_size_suffix};
                               title python:view.image_title(image)"
               rel="colorbox"
               >hidden</a>
        </tal:before-batch>
        <div class="photoAlbumRow" tal:repeat="row python:view.rows(batch)">
            <tal:images tal:condition="batch" tal:repeat="image row">
            <div class="photoAlbumEntry">
                <a tal:define="id python:int(b_start)+int(repeat['image'].number()-1)"
                   class="colorboxLink"
                   tal:attributes="href string:${image/absolute_url}${image_size_suffix};
                                   title python:view.image_title(image)"
                   rel="colorbox">
                    <span class="photoAlbumEntryWrapper">
                        <img src="" alt="" tal:replace="structure python:image.tag(scale='thumb', title=image.Description())" />
                    </span>
                    <span class="photoAlbumEntryTitle" tal:content="image/pretty_title_or_id">
                       Title
                    </span>
                </a>
            </div>
            </tal:images>
        </div>
        <tal:after-batch repeat="image python:images[int(b_start)+b_size:]">
            <a class="hiddenStructure colorboxLink"
               tal:attributes="href string:${image/absolute_url}${image_size_suffix};
                               title python:view.image_title(image)"
               rel="colorbox"
               >hidden</a>
        </tal:after-batch>
        <div class="visualClear"><!-- --></div>

    </tal:albumsimages>

    <p class="discreet"
       i18n:domain="atcontenttypes"
       i18n:translate="text_no_albums_uploaded"
       tal:condition="python:not (albums or images)">
        No albums or photos uploaded yet.
    </p>

    <div tal:condition="python:albums or images"
         metal:use-macro="here/batch_macros/macros/navigation" />

    <tal:listing condition="otherContents"
                 define="folderContents otherContents">
        <metal:listing metal:use-macro="here/folder_listing/macros/listing">
            <metal:empty metal:fill-slot="no_items_in_listing"></metal:empty>
        </metal:listing>

    </tal:listing>

    <metal:subtopics use-macro="here/atct_topic_view/macros/folderlisting_macro" />

</metal:main_macro>
</metal:content-core>

</body>

</html>